<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Robot Turtle</title>
  </head>
<body style="overflow: hidden; margin: 0; padding: 0;">
<canvas id="canvas" width="500" height="500" style="
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  "></canvas>

<p id="XY">
  X = 0
  Y = 0
</p>

<button onclick="getPoints()">Get List 'o Points</button>

<script type="text/javascript">
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext('2d');

var scale = 1;
var logoX = 0;
var logoY = 0;
var logo = new Image;
  logo.src = "7316SVG.svg";
  logo.onload = function() { render() };

var pointsList = [];

function render(){
  //draw background
  ctx.fillStyle = "white";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  //draw axis
  ctx.fillStyle = "red";
  ctx.fillRect(canvas.width/2 - 1, 0, 3, canvas.height);
  ctx.fillRect(0, canvas.height/2 - 1,  canvas.width, 3);

  //draw image
  var centerX = (canvas.width - canvas.width * scale) / 2;
  var centerY = (canvas.height - canvas.height * scale) / 2;
  ctx.drawImage(logo, centerX, centerY, canvas.width * scale, canvas.height * scale);
}

//calculates all the points the turtle will have to drive through in order
//traces the outside of the shape based on if there is still black in a three by three box
//around tracer
function getPoints() {
  imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  rgbaData = imgData.data;

  for (var y = 0; y < canvas.height; y++) {  //loop through each scanline of canvas
    //loop through scanline pixels
    var scanline = y * canvas.width * 4;  //RGBA

    for (var x = 0; x < canvas.width; x++) {
      //if pixel black save that index
      if (rgbaData[scanline + x * 4] == 0 && rgbaData[scanline + x * 4 + 1] == 0 && rgbaData[scanline + x * 4 + 2] == 0) {
        var scaledX = (x - canvas.width/2) * 70.25/(canvas.width/2);
        var scaledY = -(y - canvas.height/2) * 70.25/(canvas.height/2);
        document.write("(" + scaledX + ", " + scaledY + ")<br>" );
      }
    }
  }
}

canvas.addEventListener('mousedown', function(e) {
  var rect = canvas.getBoundingClientRect();
  //gets points based on middle of canvas being (0,0)
  var mX = e.x - rect.left - canvas.width/2;
  var mY = e.y - rect.top - canvas.height/2;
  //console.log(mX + ", " + mY);
  var scaledX = mX * (70.25/(canvas.width/2));
  var scaledY = -1 * mY * (70.25/( canvas.height/2));
  document.getElementById("XY").innerText = "X = " + scaledX + " Y = " + scaledY;
});

canvas.addEventListener('mousemove', function(e) {

});

canvas.addEventListener('mouseup', function(e) {

});

canvas.addEventListener("mousewheel", function(e) {
  scale += -e.deltaY / 1000;
  // console.log(scale)
  logo.style = "transform: scale(0%)";
  //logo.style.backgroundColor = scale;
  //logo.setAttribute("transform", "scale(" + scale + ")");

  render();
});

canvas.addEventListener('contextmenu', function(e) {
   event.preventDefault();  //stop right click menu showin up
   //var mX = e.x - rect.left - canvas.width/2;
   //var mY = e.y - rect.top - canvas.height/2;
});

</script>
</body>
</html>
